<div class="admin-container">
    <!-- Migajas de Pan -->
    <nav class="breadcrumb-nav" aria-label="Migajas de pan">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="/dashboard" class="breadcrumb-link">INICIO</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
                DAR DE ALTA AL CLIENTE
            </li>
        </ol>
    </nav>

    <div class="admin-header">
        <h1 class="reset-title">ALTA DEL CLIENTE</h1>
    </div>

    <div class="admin-content">
        <div class="progress-container">
            <div class="progress-bar">
                <div class="progress" [style.width]="progreso + '%'"></div>
            </div>
            <div class="step-indicator">Paso {{ currentStep }} de {{ totalSteps }}</div>
        </div>

        <form class="register-form">
             <div class="div-obliga">
                <span class="obligatorios">Campos obligatorios *</span>
            </div>
            <!-- PASO 1: Dirección del Cliente -->
            <div *ngIf="currentStep === 1">
                <h2 class="section-title">DIRECCIÓN DEL CLIENTE</h2>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="municipio">MUNICIPIO <span class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccion.municipio"
                                name="municipio" (input)="convertirAMayusculas($event, 'direccion', 'municipio')"
                                [class.is-invalid]="errors['municipio']" required>
                            <div class="error-message" *ngIf="errors['municipio']">
                                {{ errors['municipio'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="localidad">LOCALIDAD <span class="asterisco">*</span>
                            </label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccion.localidad"
                                name="localidad" (input)="convertirAMayusculas($event, 'direccion', 'localidad')"
                                [class.is-invalid]="errors['localidad']" required>
                            <div class="error-message" *ngIf="errors['localidad']">
                                {{ errors['localidad'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="calle">CALLE <span class="asterisco">*</span> </label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccion.calle" name="calle"
                                (input)="convertirAMayusculas($event, 'direccion', 'calle')"
                                [class.is-invalid]="errors['calle']" required>
                            <div class="error-message" *ngIf="errors['calle']">
                                {{ errors['calle'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="form-label" for="numero">NÚMERO <span class="asterisco">*</span></label>
                            <input type="text" class="form-control" [(ngModel)]="direccion.numero" name="numero"
                                [class.is-invalid]="errors['numero']" required>
                            <div class="error-message" *ngIf="errors['numero']">
                                {{ errors['numero'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-primary" (click)="siguientePaso()" [disabled]="loading">
                        SIGUIENTE
                    </button>
                </div>
            </div>

            <!-- PASO 2: Datos Básicos del Cliente -->
            <div *ngIf="currentStep === 2">
                <h2 class="section-title">DATOS PERSONALES DEL CLIENTE</h2>
                <div class="row">
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="form-label" for="nombre_cliente">NOMBRE(S) <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.nombre_cliente"
                                name="nombre_cliente"
                                (input)="convertirAMayusculas($event, 'cliente', 'nombre_cliente')"
                                [class.is-invalid]="errors['nombre_cliente']" required>
                            <div class="error-message" *ngIf="errors['nombre_cliente']">
                                {{ errors['nombre_cliente'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="form-label" for="app_cliente">APELLIDO PATERNO <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.app_cliente"
                                name="app_cliente" (input)="convertirAMayusculas($event, 'cliente', 'app_cliente')"
                                [class.is-invalid]="errors['app_cliente']" required>
                            <div class="error-message" *ngIf="errors['app_cliente']">
                                {{ errors['app_cliente'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="form-label" for="apm_cliente">APELLIDO MATERNO <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.apm_cliente"
                                name="apm_cliente" (input)="convertirAMayusculas($event, 'cliente', 'apm_cliente')"
                                [class.is-invalid]="errors['apm_cliente']" required>
                            <div class="error-message" *ngIf="errors['apm_cliente']">
                                {{ errors['apm_cliente'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="form-group">
                            <label class="form-label" for="ocupacion">OCUPACIÓN <span class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.ocupacion"
                                name="ocupacion" (input)="convertirAMayusculas($event, 'cliente', 'ocupacion')"
                                [class.is-invalid]="errors['ocupacion']" required>
                            <div class="error-message" *ngIf="errors['ocupacion']">
                                {{ errors['ocupacion'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="curp">CURP <span class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.curp" name="curp"
                                (input)="convertirAMayusculas($event, 'cliente', 'curp')"
                                [class.is-invalid]="errors['curp']" required maxlength="18">
                            <div class="error-message" *ngIf="errors['curp']">
                                {{ errors['curp'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="form-label" for="nacionalidad">NACIONALIDAD</label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="cliente.nacionalidad"
                                name="nacionalidad" (input)="convertirAMayusculas($event, 'cliente', 'nacionalidad')">
                        </div>
                    </div>
                    <div class="col-md-2">
                        <!-- <div class="form-group">
                            <label class="form-label" for="telefono">TELÉFONO *</label>
                            <input type="tel" class="form-control" 
                                   [(ngModel)]="cliente.telefono" 
                                   name="telefono"  maxlength="10" inputmode="numeric"
                                    pattern="[0-9]*"
                                   [class.is-invalid]="errors['telefono']" 
                                   required>
                            <div class="error-message" *ngIf="errors['telefono']">
                                {{ errors['telefono'] }}
                            </div>
                        </div> -->
                        <div class="form-group">
                            <label class="form-label" for="telefono">TELÉFONO <span class="asterisco">*</span></label>
                            <input type="text" class="form-control" name="telefono" [(ngModel)]="cliente.telefono"
                                maxlength="10" inputmode="numeric" pattern="[0-9]*" (input)="soloNumerosTelefono()"
                                [class.is-invalid]="errors['telefono']" required>

                            <div class="error-message" *ngIf="errors['telefono']">
                                {{ errors['telefono'] }}
                            </div>
                        </div>

                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" (click)="pasoAnterior()">
                        Anterior
                    </button>
                    <button type="button" class="btn btn-primary" (click)="siguientePaso()" [disabled]="loading">
                        Siguiente
                    </button>
                </div>
            </div>

            <!-- PASO 3: Dirección del Aval -->
            <div *ngIf="currentStep === 3">
                <h2 class="section-title">DIRECCIÓN DEL AVAL</h2>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="municipio_aval">MUNICIPIO <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccionAval.municipio"
                                name="municipio_aval"
                                (input)="convertirAMayusculas($event, 'direccionAval', 'municipio')"
                                [class.is-invalid]="errors['municipio_aval']" required>
                            <div class="error-message" *ngIf="errors['municipio_aval']">
                                {{ errors['municipio_aval'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="localidad_aval">LOCALIDAD <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccionAval.localidad"
                                name="localidad_aval"
                                (input)="convertirAMayusculas($event, 'direccionAval', 'localidad')"
                                [class.is-invalid]="errors['localidad_aval']" required>
                            <div class="error-message" *ngIf="errors['localidad_aval']">
                                {{ errors['localidad_aval'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label class="form-label" for="calle_aval">CALLE <span class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="direccionAval.calle"
                                name="calle_aval" (input)="convertirAMayusculas($event, 'direccionAval', 'calle')"
                                [class.is-invalid]="errors['calle_aval']" required>
                            <div class="error-message" *ngIf="errors['calle_aval']">
                                {{ errors['calle_aval'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-2">
                        <div class="form-group">
                            <label class="form-label" for="numero_aval">NÚMERO <span class="asterisco">*</span></label>
                            <input type="text" class="form-control" [(ngModel)]="direccionAval.numero"
                                name="numero_aval" [class.is-invalid]="errors['numero_aval']" required>
                            <div class="error-message" *ngIf="errors['numero_aval']">
                                {{ errors['numero_aval'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" (click)="pasoAnterior()">
                        ANTERIOR
                    </button>
                    <button type="button" class="btn btn-primary" (click)="siguientePaso()" [disabled]="loading">
                        SIGUIENTE
                    </button>
                </div>
            </div>

            <!-- PASO 4: Datos del Aval -->
            <div *ngIf="currentStep === 4">
                <h2 class="section-title">DATOS PERSONALES DEL AVAL</h2>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="nombre_aval">NOMBRE(S) <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="aval.nombre_aval"
                                name="nombre_aval" (input)="convertirAMayusculas($event, 'aval', 'nombre_aval')"
                                [class.is-invalid]="errors['nombre_aval']" required>
                            <div class="error-message" *ngIf="errors['nombre_aval']">
                                {{ errors['nombre_aval'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="app_aval">APELLIDO PATERNO<span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="aval.app_aval"
                                name="app_aval" (input)="convertirAMayusculas($event, 'aval', 'app_aval')"
                                [class.is-invalid]="errors['app_aval']" required>
                            <div class="error-message" *ngIf="errors['app_aval']">
                                {{ errors['app_aval'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="apm_aval">APELLIDO MATERNO <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="aval.apm_aval"
                                name="apm_aval" (input)="convertirAMayusculas($event, 'aval', 'apm_aval')"
                                [class.is-invalid]="errors['apm_aval']" required>
                            <div class="error-message" *ngIf="errors['apm_aval']">
                                {{ errors['apm_aval'] }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="curp_aval">CURP AVAL <span class="asterisco">*</span></label>
                            <input type="text" class="form-control uppercase" [(ngModel)]="aval.curp" name="curp_aval"
                                (input)="convertirAMayusculas($event, 'aval', 'curp')"
                                [class.is-invalid]="errors['curp_aval']" required maxlength="18">
                            <div class="error-message" *ngIf="errors['curp_aval']">
                                {{ errors['curp_aval'] }}
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="form-group">
                            <label class="form-label" for="telefono_aval">TELÉFONO <span
                                    class="asterisco">*</span></label>
                            <input type="text" class="form-control" [(ngModel)]="aval.telefono" name="telefono_aval"
                                maxlength="10" inputmode="numeric" pattern="[0-9]*"
                                [class.is-invalid]="errors['telefono_aval']" required>
                            <div class="error-message" *ngIf="errors['telefono_aval']">
                                {{ errors['telefono_aval'] }}
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" (click)="pasoAnterior()">
                        ANTERIOR
                    </button>
                    <button type="button" class="btn btn-success" (click)="siguientePaso()" [disabled]="loading">
                        REGISTAR CLIENTE
                    </button>
                </div>
            </div>

        </form>
    </div>
</div>